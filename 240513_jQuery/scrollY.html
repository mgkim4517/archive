<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>scrollY</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">

  <style>
    body { margin:0; text-align: center }

    header { position: fixed; top:0; width: 100%; height: 80px; background-color: #899ba3; display: flex; justify-content: space-between; transition: 0.4s; }

    header h1 { background-color: #fff; margin: 20px; padding:10px; font-size: 1.35rem; line-height: 1;} 

    header .global-menu { display: flex; list-style: none; margin:0; padding:0; text-transform: capitalize; font-weight: bold; }

    header .global-menu a { color: #fff; text-decoration: none; display: block; margin:0 20px; height: 80px; box-sizing: border-box; line-height: 80px; }

    main { height: 300vh; background-color: #ddd; padding-top: 200px; font-weight: bold; font-size: 3rem; }

    main h2 {
      background-color: orange;
    }

    header.on {
      border-bottom: 1px solid #000;
      height: 60px;
      background-color: transparent; 
    }
    
    header.on h1 {
      margin: 10px;
      font-size: 1.15rem;
    }
    header.on .global-menu a {
      height: 60px;
      line-height: 60px;
      color:#000;
    }
  </style>

  <script src="../assets/jquery-3.7.1.min.js"></script>
</head>

<body>
  <header>
    <h1>로고</h1>
    <ul class="global-menu">
      <li><a href="#">menu1</a></li>
      <li><a href="#">menu2</a></li>
      <li><a href="#">menu3</a></li>
      <li><a href="#">menu4</a></li>
    </ul>
  </header>

  <main>
    <h2>scrollY</h2>
  </main>

  <script>
    /* 
      window.pageYOffset: y축 방향으로 스크롤한 거리. 오래된 버전과 호환. 읽기 전용 속성 더 이상 사용하지 않음 (pageY -> scrollY 바꿔서 사용)
      window.scrollY: y축 방향으로 스크롤한 거리. 읽기 전용 속성
      pageXOffset: x축 방향으로 스크롤한 거리
      scrollX: x축 방향으로 스크롤한 거리

      box1.scrollTop : 요소 기준 스크롤한 거리 반환. 이동
      scrollY : 뷰포트 기준 읽기 전용 속성
    */

    const elem = document.documentElement;
    $(window).on('scroll', () => {
      // console.log('scrollTop', elem.scrollTop);
      // console.log('pageYOffset', pageYOffset);
      // console.log('scrollY', scrollY);

      // const h2Top = $('h2').offset();
      const h2Top = $('h2').offset().top - $('header').height();
      console.log(h2Top); // 259.75 = main(paddingTop:200 + h2:59.75)

      if(scrollY > h2Top) {
        $('header').addClass('on');
      } else {
        $('header').removeClass('on');
      }
    });
  </script>
</body>
</html>